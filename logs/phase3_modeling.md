# Phase 3: モデリング & シミュレーション 開発ログ

## 方針
- LightGBM (`lambdarank`) を用いて、レース内の馬の着順（Relevance）を予測するモデルを構築する。
- 評価指標として NDCG (Normalized Discounted Cumulative Gain) を使用し、学習の進捗を監視する。
- 最終的なビジネス指標である「回収率」をシミュレーションし、モデルの実用性を検証する。

## 実装ステップ
1. **KeibaLGBM:** LightGBMのラッパークラス。学習・保存・推論・重要度プロットを担当。
2. **train.py:** データセットをロードし、学習を実行するスクリプト。
3. **evaluate.py:** テストデータ(2024年)に対して推論を行い、単勝1点買いシミュレーションを行うスクリプト。

## 変更履歴
- **[2024-05-21]**: Phase 3 開始。
- **[2024-05-21]**: `src/model/lgbm.py` 実装完了。`lambdarank` 客観関数、Early Stopping、特徴量重要度可視化を実装。
- **[2024-05-21]**: `src/model/train.py` 実装完了。データセット読み込みからモデル保存までの一連の流れを構築。
- **[2024-05-21]**: `src/model/evaluate.py` 実装完了。テストデータを用いた単勝回収率シミュレーション機能を追加。

## 次のステップ
- モデルのハイパーパラメータチューニング (Optunaなど)。
- 予測スコアに基づいた高度な馬券購入戦略（期待値計算など）の実装。
- アンサンブル（Phase 4）。
