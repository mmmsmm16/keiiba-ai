# Keiiba-AI Project Roadmap (2025年以降)

本ドキュメントは、Keiiba-AIシステムの今後の進化に向けた戦略的ロードマップです。通知システムのUX改善（Phase 16-17相当）が完了したことを受け、プロジェクトは「分析の深化」「モデルの高度化」「インフラの安定化」へと焦点を移します。
フェーズ番号は `TASKS.md` の実績（Phase 18まで）に続く形で設定しています。

## 現状 (Current State)
- **自動予測**: `Ensemble v4` (2025年再学習版) が稼働中。
- **通知**: Discordボットにより、リアルタイムで予測（スコア・勝率・EV）とNetKeibaリンクを通知。
- **実装済み機能**: リアルタイムオッズ取得、信頼度判定、Smart Value推奨。

---

## 今後のロードマップ (Future Roadmap)

### Phase 19: ダッシュボード 2.0 (Deep Analytics)
**目的**: 予測精度の「見える化」と、最適な馬券戦略の発見。
単なる予測リストの表示を超え、「なぜ勝てたのか/負けたのか」を分析可能にする。

#### 主な取り組み:
1.  **予実管理の完全自動化**:
    - ROI（回収率）と的中率の推移をリアルタイムでグラフ化。
    - 競馬場別（中山 vs 東京）、距離別、馬場状態別（芝 vs ダート）の成績ブレイクダウン。
2.  **ベッティング・シミュレーター**:
    - 「もし条件Xで買い続けていたら？」を検証するバックテスト環境。
    - 例: 「スコア0.8以上、かつ単勝オッズ10倍以上の馬だけを買った場合の利益は？」
3.  **ヒートマップ分析**:
    - 「騎手 × モデルスコア」の相関ヒートマップ（AIが過小評価している騎手の発見など）。
    - 枠順有利・不利のバイアス可視化。

### Phase 20: 次世代モデル開発 (Model v5)
**目的**: 定性データの活用と先進的アーキテクチャにより、精度の壁を突破する。

#### 主な取り組み:
1.  **定性データの統合**:
    - **NLP (LLM)** を活用し、騎手コメントや調教短評を数値ベクトル化してモデルに組み込む。
    - 「パドック情報」のデータ化（入手可能な場合）。
2.  **特徴量エンジニアリングの深化**:
    - **エージェントネットワーク**: 騎手エージェントの影響力をグラフ特徴量として導入。
    - **Deep Cross Features**: 血統 × コース適性などの複雑な交互作用を学習。
3.  **モデルアーキテクチャ刷新**:
    - 時系列データの学習に特化した **Transformer** ベースのモデル導入検討。
    - TabNetの改良版やFT-Transformerの検証。

### Phase 21: インフラ安定化・クラウド化 (Deployment)
**目的**: ローカルマシンに依存しない、24時間365日の安定稼働基盤。

#### 主な取り組み:
1.  **クラウド完全移行**:
    - 全パイプライン（予測、DB、ダッシュボード）のコンテナ化 (Docker)。
    - AWS ECS/Fargate または Google Cloud Run へのデプロイ。
2.  **データパイプラインの自動化**:
    - `cron` から、堅牢なオーケストレーター (Airflow / Prefect) への移行。
    - JRA-VANデータ取得のエラーハンドリング強化と自動復旧。
3.  **マネージドデータベース**:
    - ローカルPostgreSQLから、Cloud SQL / RDS への移行による可用性向上。

#### 💰 個人開発・コスト試算 (Cost Estimate)
個人開発でもクラウド化は十分可能ですが、**JRA-VAN (Windows必須)** の扱いがカギとなります。

*   **パターンA: ハイブリッド構成 (推奨・低コスト)**
    *   **構成**: JRA-VANデータ取得のみ自宅PC(Windows)で行い、クラウドDBへ送信。予測・ダッシュボードはクラウドで稼働。
    *   **DB**: Supabase / Neon (Free Tierあり) または Cloud SQL Micro
    *   **App**: Google Cloud Run (Free Tier範囲内なら無料)
    *   **月額目安**: **¥0 〜 ¥2,000** (アクセス増で変動)

*   **パターンB: フルクラウド構成 (完全自動化)**
    *   **構成**: Windows VPSを契約してJRA-VANを稼働させる。
    *   **Windows VPS**: さくらVPS / CONOHA 等 (2GBメモリ以上推奨)
    *   **月額目安**: **¥2,000 〜 ¥4,000** (サーバー代 + JRA-VAN代)

---

## 優先順位 (Priority)
1.  **Phase 19 (Analytics)**: 最優先。モデルの改善サイクルを回すためのフィードバックループを構築します。
2.  **Phase 20 (Modeling)**: 分析結果に基づき、具体的な精度向上施策を実行します。
3.  **Phase 21 (Infrastructure)**: システムの複雑増大に合わせ、順次実施します。
