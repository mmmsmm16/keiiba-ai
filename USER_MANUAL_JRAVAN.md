# JRA-VAN データ導入マニュアル (PC-KEIBA編)

本プロジェクトでは、データの信頼性と即時性を確保するため、JRA公式データ（JRA-VAN）を使用します。
Windows環境にて「PC-KEIBA Database」を導入し、Docker上のデータベースと連携させる手順を説明します。

## 1. 事前準備
*   **JRA-VAN Data Lab.** への加入（月額会員）が必要です。
*   **JV-Link** (JRA-VAN提供のソフト) をインストールしてください。

## 2. PC-KEIBA Database のインストール
1.  公式サイト (https://pc-keiba.com/) 等から「PC-KEIBA Database」をダウンロード・インストールしてください。
2.  ソフトを起動し、JRA-VANの利用キーを設定して認証を通します。

## 3. データベース接続設定
PC-KEIBA Database から、Dockerで起動している PostgreSQL に接続します。

1.  本プロジェクトの Docker コンテナを起動しておきます。
    ```bash
    docker-compose up -d
    ```
2.  PC-KEIBA Database の「環境設定」→「データベース設定」を開きます。
3.  以下の通り設定します（`docker-compose.yml` の設定値）。
    *   **接続先 (Host):** `localhost` (または `127.0.0.1`)
    *   **ポート (Port):** `5433`
    *   **ユーザー (User):** `user`
    *   **パスワード (Pass):** `password`
    *   **データベース名 (DB Name):** `keiba`
    *   **SSLモード:** `disable` (無効)

4.  「接続テスト」を行い、成功することを確認します。
    *   ※接続できない場合、Windowsのファイアウォール設定や、Dockerのポート転送設定を確認してください。

## 4. データの取得（セットアップ）
1.  PC-KEIBA Database のメニューから「データの登録・更新」等の機能を選択します。
2.  **「セットアップ（過去データの登録）」** を選択します。
3.  取得期間（例: 2015年〜現在）を指定し、実行します。
    *   ※データ量により数時間かかる場合があります。

## 5. 完了後の確認
データ登録が完了したら、Python環境（Jupyter Lab等）からデータが見えるか確認します。
PC-KEIBA Database は独自のテーブル名（例: `jvd_race_shosai` 等）でテーブルを作成するため、プロジェクトのコード（`loader.py`）をそれに合わせて修正する必要があります。

**次のステップ:**
データ登録が完了したら、開発者（AI）に「テーブル一覧」または「スキーマ情報」を共有してください。それに基づいてロード処理を書き換えます。
