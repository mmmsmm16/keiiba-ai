# Paper Trade Configuration
# Phase 9: Real-world operation simulation
# All parameters for reproducibility

# Data settings
data:
  jra_only: true
  odds_source: "final"              # Current data uses final (confirmed) odds
  allow_final_odds: true            # Explicitly acknowledge final odds usage
  slippage_factor: 0.90             # Conservative: assume 10% slippage from final
  exclude_scratched: true           # Skip races with scratched runners in topN

# Model settings
model:
  prob_col: "prob_residual_softmax"  # Probability column for ranking
  model_version: "v13_market_residual"
  model_dir: "models/v13_market_residual"
  fold_models:                      # 3-fold ensemble
    - "v13_fold_2022.txt"
    - "v13_fold_2023.txt"
    - "v13_fold_2024.txt"

# Strategy settings
strategy:
  ticket: "sanrenpuku"              # Ticket type: sanrenpuku, sanrentan, umaren
  topn: 4                           # BOX size (top N horses)
  bet_unit: 100                     # Yen per ticket
  max_tickets_per_race: null        # Optional limit (null = no limit)

# Risk management
risk:
  initial_bankroll: 100000          # Starting capital (yen)
  max_bet_frac: 0.05                # Max 5% of equity per race
  max_bet_per_race: 5000            # Hard cap per race (yen)
  stop_if_drawdown_pct: 50          # Stop if drawdown exceeds this %
  min_equity_threshold: 1000        # Stop betting below this (yen)

# Report settings
report:
  out_dir: "reports/paper_trade"
  data_dir: "data/paper_trade"
  save_ledger: true
  save_predictions: true
  save_tickets: true
  seed: 42

# Logging
logging:
  level: "INFO"
  save_skip_reasons: true
  max_skip_samples: 50              # Max failed race_ids to log
